/**
 * @author 
 * @email 
 * @descrip zhong'ou wechat.
 * @version v1.0.0
 */
define(function(require,exports,module){var e=require("zepto");+function($){"use strict";var e=!1,a=function(a){function n(e){e=new Date(e);var a=e.getFullYear(),n=e.getMonth(),t=n+1,r=e.getDate(),o=e.getDay();return i.params.dateFormat.replace(/yyyy/g,a).replace(/yy/g,(a+"").substring(2)).replace(/mm/g,t<10?"0"+t:t).replace(/m/g,t).replace(/MM/g,i.params.monthNames[n]).replace(/M/g,i.params.monthNamesShort[n]).replace(/dd/g,r<10?"0"+r:r).replace(/d/g,r).replace(/DD/g,i.params.dayNames[o]).replace(/D/g,i.params.dayNamesShort[o])}function t(e){if(e.preventDefault(),$.device.isWeixin&&$.device.android&&i.params.inputReadOnly&&(this.focus(),this.blur()),!i.opened&&(i.open(),i.params.scrollToInput)){var a=i.input.parents(".content");if(0===a.length)return;var n,t=parseInt(a.css("padding-top"),10),r=parseInt(a.css("padding-bottom"),10),o=a[0].offsetHeight-t-i.container.height(),s=a[0].scrollHeight-t-i.container.height(),p=i.input.offset().top-t+i.input[0].offsetHeight;if(p>o){var c=a.scrollTop()+p-o;c+o>s&&(n=c+o-s+r,o===s&&(n=i.container.height()),a.css({"padding-bottom":n+"px"})),a.scrollTop(c,300)}}}function r(e){i.input&&i.input.length>0?e.target!==i.input[0]&&0===$(e.target).parents(".picker-modal").length&&i.close():0===$(e.target).parents(".picker-modal").length&&i.close()}function o(){i.opened=!1,i.input&&i.input.length>0&&i.input.parents(".content").css({"padding-bottom":""}),i.params.onClose&&i.params.onClose(i),i.destroyCalendarEvents()}var i=this,s={monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["周日","周一","周二","周三","周四","周五","周六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],firstDay:1,weekendDays:[0,6],multiple:!1,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:!0,animate:!0,closeOnSelect:!0,monthPicker:!0,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><div class="current-month-value"></div><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',yearPicker:!0,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',weekHeader:!0,scrollToInput:!0,inputReadOnly:!0,toolbar:!0,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>'};a=a||{};for(var p in s)"undefined"==typeof a[p]&&(a[p]=s[p]);i.params=a,i.initialized=!1,i.inline=!!i.params.container,i.isH="horizontal"===i.params.direction;var c=i.isH&&e?-1:1;return i.animating=!1,i.addValue=function(e){if(i.params.multiple){i.value||(i.value=[]);for(var a,n=0;n<i.value.length;n++)new Date(e).getTime()===new Date(i.value[n]).getTime()&&(a=n);"undefined"==typeof a?i.value.push(e):i.value.splice(a,1),i.updateValue()}else i.value=[e],i.updateValue()},i.setValue=function(e){i.value=e,i.updateValue()},i.updateValue=function(){i.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var e,a;for(e=0;e<i.value.length;e++){var t=new Date(i.value[e]);i.wrapper.find('.picker-calendar-day[data-date="'+t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+'"]').addClass("picker-calendar-day-selected")}if(i.params.onChange&&i.params.onChange(i,i.value,i.value.map(n)),i.input&&i.input.length>0){if(i.params.formatValue)a=i.params.formatValue(i,i.value);else{for(a=[],e=0;e<i.value.length;e++)a.push(n(i.value[e]));a=a.join(", ")}$(i.input).val(a),$(i.input).trigger("change")}},i.initCalendarEvents=function(){function a(e){s||o||(o=!0,p=m="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,l=m="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,h=(new Date).getTime(),y=0,D=!0,w=void 0,f=v=i.monthsTranslate)}function n(e){if(o){if(d="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,m="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,"undefined"==typeof w&&(w=!!(w||Math.abs(m-l)>Math.abs(d-p))),i.isH&&w)return void(o=!1);if(e.preventDefault(),i.animating)return void(o=!1);D=!1,s||(s=!0,g=i.wrapper[0].offsetWidth,k=i.wrapper[0].offsetHeight,i.wrapper.transition(0)),e.preventDefault(),M=i.isH?d-p:m-l,y=M/(i.isH?g:k),v=100*(i.monthsTranslate*c+y),i.wrapper.transform("translate3d("+(i.isH?v:0)+"%, "+(i.isH?0:v)+"%, 0)")}}function t(a){return o&&s?(o=s=!1,u=(new Date).getTime(),u-h<300?Math.abs(M)<10?i.resetMonth():M>=10?e?i.nextMonth():i.prevMonth():e?i.prevMonth():i.nextMonth():y<=-.5?e?i.prevMonth():i.nextMonth():y>=.5?e?i.nextMonth():i.prevMonth():i.resetMonth(),void setTimeout(function(){D=!0},100)):void(o=s=!1)}function r(e){if(D){var a=$(e.target).parents(".picker-calendar-day");if(0===a.length&&$(e.target).hasClass("picker-calendar-day")&&(a=$(e.target)),0!==a.length&&(!a.hasClass("picker-calendar-day-selected")||i.params.multiple)&&!a.hasClass("picker-calendar-day-disabled")){a.hasClass("picker-calendar-day-next")&&i.nextMonth(),a.hasClass("picker-calendar-day-prev")&&i.prevMonth();var n=a.attr("data-year"),t=a.attr("data-month"),r=a.attr("data-day");i.params.onDayClick&&i.params.onDayClick(i,a[0],n,t,r),i.addValue(new Date(n,t,r).getTime()),i.params.closeOnSelect&&i.close()}}}var o,s,p,l,d,m,h,u,f,v,g,k,y,M,w,D=!0;i.container.find(".picker-calendar-prev-month").on("click",i.prevMonth),i.container.find(".picker-calendar-next-month").on("click",i.nextMonth),i.container.find(".picker-calendar-prev-year").on("click",i.prevYear),i.container.find(".picker-calendar-next-year").on("click",i.nextYear),i.wrapper.on("click",r),i.params.touchMove&&(i.wrapper.on($.touchEvents.start,a),i.wrapper.on($.touchEvents.move,n),i.wrapper.on($.touchEvents.end,t)),i.container[0].f7DestroyCalendarEvents=function(){i.container.find(".picker-calendar-prev-month").off("click",i.prevMonth),i.container.find(".picker-calendar-next-month").off("click",i.nextMonth),i.container.find(".picker-calendar-prev-year").off("click",i.prevYear),i.container.find(".picker-calendar-next-year").off("click",i.nextYear),i.wrapper.off("click",r),i.params.touchMove&&(i.wrapper.off($.touchEvents.start,a),i.wrapper.off($.touchEvents.move,n),i.wrapper.off($.touchEvents.end,t))}},i.destroyCalendarEvents=function(e){"f7DestroyCalendarEvents"in i.container[0]&&i.container[0].f7DestroyCalendarEvents()},i.daysInMonth=function(e){var a=new Date(e);return new Date(a.getFullYear(),a.getMonth()+1,0).getDate()},i.monthHTML=function(e,a){e=new Date(e);var n=e.getFullYear(),t=e.getMonth();e.getDate();"next"===a&&(e=11===t?new Date(n+1,0):new Date(n,t+1,1)),"prev"===a&&(e=0===t?new Date(n-1,11):new Date(n,t-1,1)),"next"!==a&&"prev"!==a||(t=e.getMonth(),n=e.getFullYear());var r=i.daysInMonth(new Date(e.getFullYear(),e.getMonth()).getTime()-864e6),o=i.daysInMonth(e),s=new Date(e.getFullYear(),e.getMonth()).getDay();0===s&&(s=7);var p,c,l,d=[],m=6,h=7,u="",f=0+(i.params.firstDay-1),v=(new Date).setHours(0,0,0,0),g=i.params.minDate?new Date(i.params.minDate).getTime():null,k=i.params.maxDate?new Date(i.params.maxDate).getTime():null;if(i.value&&i.value.length)for(c=0;c<i.value.length;c++)d.push(new Date(i.value[c]).setHours(0,0,0,0));for(c=1;c<=m;c++){var y="";for(l=1;l<=h;l++){var M=l;f++;var w=f-s,D="";w<0?(w=r+w+1,D+=" picker-calendar-day-prev",p=new Date(t-1<0?n-1:n,t-1<0?11:t-1,w).getTime()):(w+=1,w>o?(w-=o,D+=" picker-calendar-day-next",p=new Date(t+1>11?n+1:n,t+1>11?0:t+1,w).getTime()):p=new Date(n,t,w).getTime()),p===v&&(D+=" picker-calendar-day-today"),d.indexOf(p)>=0&&(D+=" picker-calendar-day-selected"),i.params.weekendDays.indexOf(M-1)>=0&&(D+=" picker-calendar-day-weekend"),(g&&p<g||k&&p>k)&&(D+=" picker-calendar-day-disabled"),p=new Date(p);var T=p.getFullYear(),x=p.getMonth();y+='<div data-year="'+T+'" data-month="'+x+'" data-day="'+w+'" class="picker-calendar-day'+D+'" data-date="'+(T+"-"+x+"-"+w)+'"><span>'+w+"</span></div>"}u+='<div class="picker-calendar-row">'+y+"</div>"}return u='<div class="picker-calendar-month" data-year="'+n+'" data-month="'+t+'">'+u+"</div>"},i.animating=!1,i.updateCurrentMonthYear=function(e){"undefined"==typeof e?(i.currentMonth=parseInt(i.months.eq(1).attr("data-month"),10),i.currentYear=parseInt(i.months.eq(1).attr("data-year"),10)):(i.currentMonth=parseInt(i.months.eq("next"===e?i.months.length-1:0).attr("data-month"),10),i.currentYear=parseInt(i.months.eq("next"===e?i.months.length-1:0).attr("data-year"),10)),i.container.find(".current-month-value").text(i.params.monthNames[i.currentMonth]),i.container.find(".current-year-value").text(i.currentYear)},i.onMonthChangeStart=function(e){i.updateCurrentMonthYear(e),i.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var a="next"===e?i.months.length-1:0;i.months.eq(a).addClass("picker-calendar-month-current"),i.months.eq("next"===e?a-1:a+1).addClass("next"===e?"picker-calendar-month-prev":"picker-calendar-month-next"),i.params.onMonthYearChangeStart&&i.params.onMonthYearChangeStart(i,i.currentYear,i.currentMonth)},i.onMonthChangeEnd=function(e,a){i.animating=!1;var n,t,r;i.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove(),"undefined"==typeof e&&(e="next",a=!0),a?(i.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove(),t=i.monthHTML(new Date(i.currentYear,i.currentMonth),"prev"),n=i.monthHTML(new Date(i.currentYear,i.currentMonth),"next")):r=i.monthHTML(new Date(i.currentYear,i.currentMonth),e),("next"===e||a)&&i.wrapper.append(r||n),("prev"===e||a)&&i.wrapper.prepend(r||t),i.months=i.wrapper.find(".picker-calendar-month"),i.setMonthsTranslate(i.monthsTranslate),i.params.onMonthAdd&&i.params.onMonthAdd(i,"next"===e?i.months.eq(i.months.length-1)[0]:i.months.eq(0)[0]),i.params.onMonthYearChangeEnd&&i.params.onMonthYearChangeEnd(i,i.currentYear,i.currentMonth)},i.setMonthsTranslate=function(e){e=e||i.monthsTranslate||0,"undefined"==typeof i.monthsTranslate&&(i.monthsTranslate=e),i.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var a=100*-(e+1)*c,n=100*-e*c,t=100*-(e-1)*c;i.months.eq(0).transform("translate3d("+(i.isH?a:0)+"%, "+(i.isH?0:a)+"%, 0)").addClass("picker-calendar-month-prev"),i.months.eq(1).transform("translate3d("+(i.isH?n:0)+"%, "+(i.isH?0:n)+"%, 0)").addClass("picker-calendar-month-current"),i.months.eq(2).transform("translate3d("+(i.isH?t:0)+"%, "+(i.isH?0:t)+"%, 0)").addClass("picker-calendar-month-next")},i.nextMonth=function(e){"undefined"!=typeof e&&"object"!=typeof e||(e="",i.params.animate||(e=0));var a=parseInt(i.months.eq(i.months.length-1).attr("data-month"),10),n=parseInt(i.months.eq(i.months.length-1).attr("data-year"),10),t=new Date(n,a),r=t.getTime(),o=!i.animating;if(i.params.maxDate&&r>new Date(i.params.maxDate).getTime())return i.resetMonth();if(i.monthsTranslate--,a===i.currentMonth){var s=100*-i.monthsTranslate*c,p=$(i.monthHTML(r,"next")).transform("translate3d("+(i.isH?s:0)+"%, "+(i.isH?0:s)+"%, 0)").addClass("picker-calendar-month-next");i.wrapper.append(p[0]),i.months=i.wrapper.find(".picker-calendar-month"),i.params.onMonthAdd&&i.params.onMonthAdd(i,i.months.eq(i.months.length-1)[0])}i.animating=!0,i.onMonthChangeStart("next");var l=100*i.monthsTranslate*c;i.wrapper.transition(e).transform("translate3d("+(i.isH?l:0)+"%, "+(i.isH?0:l)+"%, 0)"),o&&i.wrapper.transitionEnd(function(){i.onMonthChangeEnd("next")}),i.params.animate||i.onMonthChangeEnd("next")},i.prevMonth=function(e){"undefined"!=typeof e&&"object"!=typeof e||(e="",i.params.animate||(e=0));var a=parseInt(i.months.eq(0).attr("data-month"),10),n=parseInt(i.months.eq(0).attr("data-year"),10),t=new Date(n,a+1,(-1)),r=t.getTime(),o=!i.animating;if(i.params.minDate&&r<new Date(i.params.minDate).getTime())return i.resetMonth();if(i.monthsTranslate++,a===i.currentMonth){var s=100*-i.monthsTranslate*c,p=$(i.monthHTML(r,"prev")).transform("translate3d("+(i.isH?s:0)+"%, "+(i.isH?0:s)+"%, 0)").addClass("picker-calendar-month-prev");i.wrapper.prepend(p[0]),i.months=i.wrapper.find(".picker-calendar-month"),i.params.onMonthAdd&&i.params.onMonthAdd(i,i.months.eq(0)[0])}i.animating=!0,i.onMonthChangeStart("prev");var l=100*i.monthsTranslate*c;i.wrapper.transition(e).transform("translate3d("+(i.isH?l:0)+"%, "+(i.isH?0:l)+"%, 0)"),o&&i.wrapper.transitionEnd(function(){i.onMonthChangeEnd("prev")}),i.params.animate||i.onMonthChangeEnd("prev")},i.resetMonth=function(e){"undefined"==typeof e&&(e="");var a=100*i.monthsTranslate*c;i.wrapper.transition(e).transform("translate3d("+(i.isH?a:0)+"%, "+(i.isH?0:a)+"%, 0)")},i.setYearMonth=function(e,a,n){"undefined"==typeof e&&(e=i.currentYear),"undefined"==typeof a&&(a=i.currentMonth),"undefined"!=typeof n&&"object"!=typeof n||(n="",i.params.animate||(n=0));var t;if(t=e<i.currentYear?new Date(e,a+1,(-1)).getTime():new Date(e,a).getTime(),i.params.maxDate&&t>new Date(i.params.maxDate).getTime())return!1;if(i.params.minDate&&t<new Date(i.params.minDate).getTime())return!1;var r=new Date(i.currentYear,i.currentMonth).getTime(),o=t>r?"next":"prev",s=i.monthHTML(new Date(e,a));i.monthsTranslate=i.monthsTranslate||0;var p,l,d=i.monthsTranslate,m=!i.animating;t>r?(i.monthsTranslate--,i.animating||i.months.eq(i.months.length-1).remove(),i.wrapper.append(s),i.months=i.wrapper.find(".picker-calendar-month"),p=100*-(d-1)*c,i.months.eq(i.months.length-1).transform("translate3d("+(i.isH?p:0)+"%, "+(i.isH?0:p)+"%, 0)").addClass("picker-calendar-month-next")):(i.monthsTranslate++,i.animating||i.months.eq(0).remove(),i.wrapper.prepend(s),i.months=i.wrapper.find(".picker-calendar-month"),p=100*-(d+1)*c,i.months.eq(0).transform("translate3d("+(i.isH?p:0)+"%, "+(i.isH?0:p)+"%, 0)").addClass("picker-calendar-month-prev")),i.params.onMonthAdd&&i.params.onMonthAdd(i,"next"===o?i.months.eq(i.months.length-1)[0]:i.months.eq(0)[0]),i.animating=!0,i.onMonthChangeStart(o),l=100*i.monthsTranslate*c,i.wrapper.transition(n).transform("translate3d("+(i.isH?l:0)+"%, "+(i.isH?0:l)+"%, 0)"),m&&i.wrapper.transitionEnd(function(){i.onMonthChangeEnd(o,!0)}),i.params.animate||i.onMonthChangeEnd(o)},i.nextYear=function(){i.setYearMonth(i.currentYear+1)},i.prevYear=function(){i.setYearMonth(i.currentYear-1)},i.layout=function(){var e,a="",n="",t=i.value&&i.value.length?i.value[0]:(new Date).setHours(0,0,0,0),r=i.monthHTML(t,"prev"),o=i.monthHTML(t),s=i.monthHTML(t,"next"),p='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(r+o+s)+"</div></div>",c="";if(i.params.weekHeader){for(e=0;e<7;e++){var l=e+i.params.firstDay>6?e-7+i.params.firstDay:e+i.params.firstDay,d=i.params.dayNamesShort[l];c+='<div class="picker-calendar-week-day '+(i.params.weekendDays.indexOf(l)>=0?"picker-calendar-week-day-weekend":"")+'"> '+d+"</div>"}c='<div class="picker-calendar-week-days">'+c+"</div>"}n="picker-modal picker-calendar "+(i.params.cssClass||"");var m=i.params.toolbar?i.params.toolbarTemplate.replace(/{{closeText}}/g,i.params.toolbarCloseText):"";i.params.toolbar&&(m=i.params.toolbarTemplate.replace(/{{closeText}}/g,i.params.toolbarCloseText).replace(/{{monthPicker}}/g,i.params.monthPicker?i.params.monthPickerTemplate:"").replace(/{{yearPicker}}/g,i.params.yearPicker?i.params.yearPickerTemplate:"")),a='<div class="'+n+'">'+m+'<div class="picker-modal-inner">'+c+p+"</div></div>",i.pickerHTML=a},i.params.input&&(i.input=$(i.params.input),i.input.length>0&&(i.params.inputReadOnly&&i.input.prop("readOnly",!0),i.inline||i.input.on("click",t))),i.inline||$("html").on("click",r),i.opened=!1,i.open=function(){var e=!1;i.opened||(i.value||i.params.value&&(i.value=i.params.value,e=!0),i.layout(),i.inline?(i.container=$(i.pickerHTML),i.container.addClass("picker-modal-inline"),$(i.params.container).append(i.container)):(i.container=$($.pickerModal(i.pickerHTML)),$(i.container).on("close",function(){o()})),i.container[0].f7Calendar=i,i.wrapper=i.container.find(".picker-calendar-months-wrapper"),i.months=i.wrapper.find(".picker-calendar-month"),i.updateCurrentMonthYear(),i.monthsTranslate=0,i.setMonthsTranslate(),i.initCalendarEvents(),e&&i.updateValue()),i.opened=!0,i.initialized=!0,i.params.onMonthAdd&&i.months.each(function(){i.params.onMonthAdd(i,this)}),i.params.onOpen&&i.params.onOpen(i)},i.close=function(){i.opened&&!i.inline&&$.closeModal(i.container)},i.destroy=function(){i.close(),i.params.input&&i.input.length>0&&i.input.off("click",t),$("html").off("click",r)},i.inline&&i.open(),i};$.fn.calendar=function(e){return this.each(function(){var n=$(this);if(n[0]){var t={};"INPUT"===n[0].tagName.toUpperCase()?t.input=n:t.container=n,new a($.extend(t,e))}})},$.initCalendar=function(e){var a=$(e?e:document.body);a.find("[data-toggle='date']").each(function(){$(this).calendar()})}}(e)});